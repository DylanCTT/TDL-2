package view;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;

public class VentanaNuevoPerfil extends JPanel {
    private JLabel lblNombre = new JLabel("Nombre perfil");
    private JTextField tfNombre = new JTextField(50);
    private JLabel lblColores = new JLabel("Color");
    String[] colores = {"Rojo", "Verde", "Azul"};
    private JComboBox<String> color = new JComboBox<>(colores);
    private JButton btnCrearPerfil = new JButton("Crear perfil");

    // Panel de vista previa
    private JPanel panelDemo = new JPanel(new BorderLayout());
    private JLabel lblDemoNombre = new JLabel("Ejemplo", SwingConstants.CENTER);

    public VentanaNuevoPerfil() {
        setLayout(new BorderLayout());

        // ðŸŽ¨ Panel izquierdo: vista previa del perfil
        panelDemo.setPreferredSize(new Dimension(350, 950));
        panelDemo.setBackground(Color.RED); // color inicial
        lblDemoNombre.setFont(new Font("Calibri", Font.BOLD, 24));
        lblDemoNombre.setForeground(Color.WHITE);
        panelDemo.add(lblDemoNombre, BorderLayout.CENTER);
        add(panelDemo, BorderLayout.WEST);

        // ðŸ§± Panel derecho: formulario
        JPanel panelCentral = new JPanel(new GridBagLayout());
        panelCentral.setBorder(BorderFactory.createEmptyBorder(100, 50, 100, 50));

        lblNombre.setFont(new Font("Calibri", Font.BOLD, 18));
        tfNombre.setPreferredSize(new Dimension(300, 35));

        lblColores.setFont(new Font("Calibri", Font.BOLD, 18));
        color.setFont(new Font("Calibri", Font.PLAIN, 16));
        color.setPreferredSize(new Dimension(300, 35));

        btnCrearPerfil.setPreferredSize(new Dimension(150, 40));

        GridBagConstraints gbc = new GridBagConstraints();
        gbc.insets = new Insets(20, 10, 20, 10);
        gbc.anchor = GridBagConstraints.WEST;

        // Campo nombre
        gbc.gridx = 0; gbc.gridy = 0;
        panelCentral.add(lblNombre, gbc);
        gbc.gridx = 1;
        panelCentral.add(tfNombre, gbc);

        // Campo color
        gbc.gridx = 0; gbc.gridy = 1;
        panelCentral.add(lblColores, gbc);
        gbc.gridx = 1;
        panelCentral.add(color, gbc);

        // BotÃ³n
        gbc.gridx = 0; gbc.gridy = 2; gbc.gridwidth = 2;
        gbc.anchor = GridBagConstraints.CENTER;
        panelCentral.add(btnCrearPerfil, gbc);

        add(panelCentral, BorderLayout.CENTER);

        // ðŸ”„ ActualizaciÃ³n dinÃ¡mica del panel demo
        tfNombre.getDocument().addDocumentListener(new DocumentListener() {
            public void insertUpdate(DocumentEvent e) { actualizarDemo(); }
            public void removeUpdate(DocumentEvent e) { actualizarDemo(); }
            public void changedUpdate(DocumentEvent e) { actualizarDemo(); }
        });
        color.addActionListener(e -> actualizarDemo());
    }

    private void actualizarDemo() {
        String nombre = tfNombre.getText().trim();
        lblDemoNombre.setText(nombre.isEmpty() ? "Ejemplo" : nombre);

        String colorSeleccionado = (String) color.getSelectedItem();
        switch (colorSeleccionado) {
            case "Rojo":  panelDemo.setBackground(Color.RED); break;
            case "Verde": panelDemo.setBackground(Color.GREEN); break;
            case "Azul":  panelDemo.setBackground(Color.BLUE); break;
        }
        panelDemo.repaint();
    }

    // MÃ©todos existentes (sin cambios)
    public void addCrearPerfilListener(ActionListener l) {
        btnCrearPerfil.addActionListener(l);
    }
    public String getNombre() {
        return tfNombre.getText();
    }
    public JButton getBotonCrearPerfil() {
        return btnCrearPerfil;
    }
    public void mostrarMensaje(String msj) {
        JOptionPane.showMessageDialog(this, msj);
    }
    public void mostrarMensajeError(String msj) {
        JOptionPane.showMessageDialog(this, msj, "Error", JOptionPane.ERROR_MESSAGE);
    }
}
